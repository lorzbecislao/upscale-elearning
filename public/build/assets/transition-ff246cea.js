import{N as oe,s as ue,k as g,t as se,a as de,u as x,b as p,f as fe,A as Q,l as ve,m as pe,o as q}from"./XIcon-1b05f6c1.js";import{o as W}from"./dialog-4910b468.js";import{y as Y,r as b,A as Z,x as F,q as S,X as G,L as C,l as he,_ as H,I as me,$ as P}from"./app-b19efd51.js";function ce(e){let t={called:!1};return(...a)=>{if(!t.called)return t.called=!0,e(...a)}}function O(e,...t){e&&t.length>0&&e.classList.add(...t)}function w(e,...t){e&&t.length>0&&e.classList.remove(...t)}var D=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(D||{});function ge(e,t){let a=W();if(!e)return a.dispose;let{transitionDuration:i,transitionDelay:o}=getComputedStyle(e),[n,l]=[i,o].map(r=>{let[u=0]=r.split(",").filter(Boolean).map(s=>s.includes("ms")?parseFloat(s):parseFloat(s)*1e3).sort((s,d)=>d-s);return u});return n!==0?a.setTimeout(()=>t("finished"),n+l):t("finished"),a.add(()=>t("cancelled")),a.dispose}function z(e,t,a,i,o,n){let l=W(),r=n!==void 0?ce(n):()=>{};return w(e,...o),O(e,...t,...a),l.nextFrame(()=>{w(e,...a),O(e,...i),l.add(ge(e,u=>(w(e,...i,...t),O(e,...o),r(u))))}),l.add(()=>w(e,...t,...a,...i,...o)),l.add(()=>r("cancelled")),l.dispose}function c(e=""){return e.split(/\s+/).filter(t=>t.length>1)}let U=Symbol("TransitionContext");var be=(e=>(e.Visible="visible",e.Hidden="hidden",e))(be||{});function ye(){return P(U,null)!==null}function Se(){let e=P(U,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function Ee(){let e=P(j,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let j=Symbol("NestingContext");function A(e){return"children"in e?A(e.children):e.value.filter(({state:t})=>t==="visible").length>0}function J(e){let t=b([]),a=b(!1);S(()=>a.value=!0),G(()=>a.value=!1);function i(n,l=g.Hidden){let r=t.value.findIndex(({id:u})=>u===n);r!==-1&&(x(l,{[g.Unmount](){t.value.splice(r,1)},[g.Hidden](){t.value[r].state="hidden"}}),!A(t)&&a.value&&(e==null||e()))}function o(n){let l=t.value.find(({id:r})=>r===n);return l?l.state!=="visible"&&(l.state="visible"):t.value.push({id:n,state:"visible"}),()=>i(n,g.Unmount)}return{children:t,register:o,unregister:i}}let K=oe.RenderStrategy,Le=Y({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:a,slots:i,expose:o}){let n=b(0);function l(){n.value|=p.Opening,t("beforeEnter")}function r(){n.value&=~p.Opening,t("afterEnter")}function u(){n.value|=p.Closing,t("beforeLeave")}function s(){n.value&=~p.Closing,t("afterLeave")}if(!ye()&&ue())return()=>Z(we,{...e,onBeforeEnter:l,onAfterEnter:r,onBeforeLeave:u,onAfterLeave:s},i);let d=b(null),E=F(()=>e.unmount?g.Unmount:g.Hidden);o({el:d,$el:d});let{show:h,appear:M}=Se(),{register:N,unregister:B}=Ee(),f=b(h.value?"visible":"hidden"),R={value:!0},y=se(),L={value:!1},I=J(()=>{!L.value&&f.value!=="hidden"&&(f.value="hidden",B(y),s())});S(()=>{let v=N(y);G(v)}),C(()=>{if(E.value===g.Hidden&&y){if(h.value&&f.value!=="visible"){f.value="visible";return}x(f.value,{hidden:()=>B(y),visible:()=>N(y)})}});let V=c(e.enter),X=c(e.enterFrom),ee=c(e.enterTo),_=c(e.entered),te=c(e.leave),ne=c(e.leaveFrom),le=c(e.leaveTo);S(()=>{C(()=>{if(f.value==="visible"){let v=q(d);if(v instanceof Comment&&v.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function ae(v){let $=R.value&&!M.value,m=q(d);!m||!(m instanceof HTMLElement)||$||(L.value=!0,h.value&&l(),h.value||u(),v(h.value?z(m,V,X,ee,_,T=>{L.value=!1,T===D.Finished&&r()}):z(m,te,ne,le,_,T=>{L.value=!1,T===D.Finished&&(A(I)||(f.value="hidden",B(y),s()))})))}return S(()=>{he([h],(v,$,m)=>{ae(m),R.value=!1},{immediate:!0})}),H(j,I),de(F(()=>x(f.value,{visible:p.Open,hidden:p.Closed})|n.value)),()=>{let{appear:v,show:$,enter:m,enterFrom:T,enterTo:Fe,entered:Ce,leave:Ae,leaveFrom:Be,leaveTo:$e,...k}=e,re={ref:d},ie={...k,...M.value&&h.value&&fe.isServer?{class:me([a.class,k.class,...V,...X])}:{}};return Q({theirProps:ie,ourProps:re,slot:{},slots:i,attrs:a,features:K,visible:f.value==="visible",name:"TransitionChild"})}}}),Te=Le,we=Y({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:a,slots:i}){let o=ve(),n=F(()=>e.show===null&&o!==null?(o.value&p.Open)===p.Open:e.show);C(()=>{if(![!0,!1].includes(n.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let l=b(n.value?"visible":"hidden"),r=J(()=>{l.value="hidden"}),u=b(!0),s={show:n,appear:F(()=>e.appear||!u.value)};return S(()=>{C(()=>{u.value=!1,n.value?l.value="visible":A(r)||(l.value="hidden")})}),H(j,r),H(U,s),()=>{let d=pe(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),E={unmount:e.unmount};return Q({ourProps:{...E,as:"template"},theirProps:{},slot:{},slots:{...i,default:()=>[Z(Te,{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave"),...a,...E,...d},i.default)]},attrs:{},features:K,visible:l.value==="visible",name:"Transition"})}}});export{we as S,Le as h};
