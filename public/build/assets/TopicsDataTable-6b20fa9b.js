import{q as P,r as n,l as V,e as Y,c as m,d as t,F as y,i as O,a as r,o as _,t as f,u as w,O as F}from"./app-b19efd51.js";import{_ as I}from"./Pagination-87e350d7.js";import{_ as j,a as q,r as A,T as H}from"./FlashNotificationsFrontEnd-eb33766e.js";import{h as L}from"./moment-a9aaa855.js";import{_ as z}from"./Toggle-0636531a.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Modal-8b7fb719.js";import"./XIcon-1b05f6c1.js";import"./dialog-4910b468.js";import"./transition-ff246cea.js";import"./PrimaryButton-3a9c59a6.js";import"./SecondaryButton-74dd022e.js";/* empty css                                                                  */import"./CheckCircleIcon-8759a125.js";import"./use-resolve-button-type-871855d6.js";const G={class:"mt-8 flow-root"},J={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},K={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},Q={class:"min-w-full divide-y divide-gray-300"},R=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0"},"Title "),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Status "),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Created At "),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Created By "),t("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-0"},[t("span",{class:"sr-only"},"Edit")])])],-1),U={class:"divide-y divide-gray-200"},W={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-bold text-primary sm:pl-0"},X={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Z={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},ee={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},te={class:"relative whitespace-nowrap inline-flex items-center py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-0"},he={__name:"TopicsDataTable",props:{course:Object},setup(b,{expose:T}){const S=b;P(()=>{l()});const i=n(null),p=n("id"),u=n("asc"),o=n([]),c=n(!1),g=n(null),d=n(!1),h={icon:"check",header:null},l=(e=1)=>{axios.get("/admin/topics/data-table",{params:{page:e,search:i.value,sort_column:p.value,sort_direction:u.value,course_id:S.course.id}}).then(s=>{o.value=s.data}).catch(s=>{console.error(s)})};function k(e){i.value=e,l(1)}V([i,p,u],()=>{l()},{immediate:!0}),T({handleSearch:k,loadData:l});const v=Y({id:null});function C(e){if(e){const s=e.match(/page=(\d+)/),a=s?s[1]:1;l(a)}}function D(e){l(e)}function $(e){g.value=e,c.value=!0}function B(){axios.post(route("admin.topics.delete",g.value.id)).then(e=>{c.value=!1,d.value=!0,h.header="Topic deleted successfully",l(1)}).catch(e=>{console.error("Delete error:",e)})}function M(e){F.visit(route("admin.topics.edit",e.slug))}function E(e){v.id=e.id,v.patch(route("admin.topics.toggleStatus",e.id),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{l()}})}return(e,s)=>(_(),m(y,null,[t("div",G,[t("div",J,[t("div",K,[t("table",Q,[R,t("tbody",U,[(_(!0),m(y,null,O(o.value.data,(a,N)=>(_(),m("tr",{key:N},[t("td",W,f(a.title),1),t("td",X,[r(z,{value:!!a.status,type:"success",onToggleValue:x=>E(a)},null,8,["value","onToggleValue"])]),t("td",Z,f(w(L)(a.created_at).format("MMM DD, YYYY")),1),t("td",ee,f(a.createdBy),1),t("td",te,[r(w(A),{onClick:x=>M(a),class:"mx-1 text-medium-gray w-5 h-5 cursor-pointer"},null,8,["onClick"]),r(H,{onClick:x=>$(a),class:"text-medium-gray cursor-pointer"},null,8,["onClick"])])]))),128))])])])])]),r(I,{class:"mt-4 px-2",current_page:o.value.current_page,last_page:o.value.last_page,next_page_url:o.value.next_page_url,prev_page_url:o.value.prev_page_url,path:o.value.path,pagination:o.value,search:i.value,sort_column:p.value,sort_direction:u.value,onEmitPage:C,onEmitSpecificPage:D,total_pages:o.value.total},null,8,["current_page","last_page","next_page_url","prev_page_url","path","pagination","search","sort_column","sort_direction","total_pages"]),r(j,{open:c.value,onClose:s[0]||(s[0]=a=>c.value=!1),onHandleSubmit:B},null,8,["open"]),r(q,{infos:h,icon:"info",state:d.value,onClose:s[1]||(s[1]=a=>d.value=!1)},null,8,["state"])],64))}};export{he as default};
