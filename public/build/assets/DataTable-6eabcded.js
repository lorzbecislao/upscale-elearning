import{r as h,l as S,o as x,c as g,a as d,w as T,d as e,m as Q,n as R,u as l,t as k,p as L,e as M,f as N,b as G,h as V,i as q,v as J,F as B,j as K,k as U,g as W,q as X,O as Y}from"./app-b19efd51.js";import{_ as Z}from"./Pagination-87e350d7.js";import{_ as ee,a as te,r as se,T as oe}from"./FlashNotificationsFrontEnd-eb33766e.js";import{_ as ae}from"./Modal-8b7fb719.js";import{_ as le}from"./PrimaryButton-3a9c59a6.js";import{_ as ne}from"./SecondaryButton-74dd022e.js";import{T as ie}from"./TextInput-9f73cf15.js";import{A as re}from"./SearchSelect.vue_vue_type_style_index_0_lang-65f8e845.js";import{I as E}from"./InformationCircleIcon-e16ef61f.js";import{_ as ce}from"./Toggle-0636531a.js";const de=["required"],ue={key:0,class:"text-red-error mt-1"},P={__name:"SearchSelect",props:{options:Array,required:{type:Boolean,default:!0},clear:{type:Boolean,default:!1},value:{type:[String,Number,Boolean],default:null},errors:{type:Array,default:()=>[]},selectable:{type:Function,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","option:selected"],setup(_,{expose:$,emit:a}){const t=_,u=h(t.value),p=m=>!0;S(u,m=>{a("update:modelValue",m)}),S(()=>t.value,m=>{u.value=m});function v(m){a("option:selected",m)}function b(){u.value=null}return $({clearValue:b}),(m,y)=>(x(),g("div",null,[d(l(re),{disabled:_.disabled,options:_.options,modelValue:u.value,"onUpdate:modelValue":y[0]||(y[0]=f=>u.value=f),selectable:_.selectable||p,reduce:f=>f.id,"onOption:selected":v,"append-to-body":""},{search:T(({attributes:f,events:s})=>[e("input",Q({class:"vs__search",required:_.required&&!u.value},f,R(s,!0)),null,16,de)]),_:1},8,["disabled","options","modelValue","selectable","reduce"]),_.errors.length?(x(),g("p",ue,k(_.errors[0]),1)):L("",!0)]))}},pe=e("h5",{class:"font-heading font-bold text-black-darkest"}," Update Assessment ",-1),me=["onSubmit"],_e={class:"pt-6"},fe={class:"pt-6"},he=e("label",{class:"block text-sm font-medium font-heading text-dark-gray-dark mb-2"}," Course ",-1),ve={class:"pt-6"},xe={class:"inline-flex items-center"},ye=e("label",{class:"block text-sm font-medium font-heading text-dark-gray-dark mb-2"}," Topic ",-1),ge={class:"-mt-1 ml-1"},be={class:"pt-6"},$e=e("label",{class:"block text-sm font-medium font-heading text-dark-gray-dark"}," Assessment Type ",-1),ke=["id","onInput","onUpdate:modelValue","value"],we=["for"],Te={class:"pt-3"},Ve=e("label",{class:"block text-sm font-medium font-heading text-dark-gray-dark"},"Instruction (Optional)",-1),Se={class:"pt-6 flex justify-end gap-3"},Ce={__name:"EditAssessmentModal",props:{open:Boolean,assessment:Object,courses:Array},emits:["close","refreshDataTable"],setup(_,{emit:$}){const a=_,t=M({instruction:a.assessment?a.assessment.instruction:null,course_id:a.assessment?a.assessment.course_id:null,topic_id:a.assessment?a.assessment.after_topic_id:null,type:a.assessment?a.assessment.type:null,title:a.assessment?a.assessment.title:null});S(()=>a.assessment,s=>{s&&(t.title=s.title,t.instruction=s.instruction,t.course_id=s.course_id,t.topic_id=s.after_topic_id,t.type=s.type,f({id:s.course_id}))});function u(){$("close")}const p=h([]),v=h(null),b=()=>{t.post(route("admin.assessments.update",a.assessment.id),{onSuccess:()=>{u(),$("refreshDataTable")}})},m=[{id:1,title:"Pratical"},{id:2,title:"Quiz"}];function y(s){t.type=s}function f(s){v.value&&v.value.clearValue(),axios.get(`/admin/topics/${s.id}/get-all`).then(i=>{i.data&&(p.value=i.data)})}return(s,i)=>{const C=N("tooltip");return x(),G(ae,{open:_.open,onClose:u},{content:T(()=>[pe,e("form",{onSubmit:W(b,["prevent"])},[e("div",_e,[d(ie,{max:100,required:!0,modelValue:l(t).title,"onUpdate:modelValue":i[0]||(i[0]=n=>l(t).title=n),errors:l(t).errors?l(t).errors.title:[],label:"Assessment Title"},null,8,["modelValue","errors"])]),e("div",fe,[he,d(P,{options:_.courses,modelValue:l(t).course_id,"onUpdate:modelValue":i[1]||(i[1]=n=>l(t).course_id=n),"onOption:selected":i[2]||(i[2]=n=>f(n)),errors:l(t).errors?l(t).errors.course_id:[],value:l(t).course_id},null,8,["options","modelValue","errors","value"])]),e("div",ve,[e("div",xe,[ye,V((x(),g("button",ge,[d(E,{class:"w-5 h-5 text-medium-gray"})])),[[C,{content:"Assessment will show after this selected topic"}]])]),d(P,{ref_key:"topicDropdown",ref:v,options:p.value,modelValue:l(t).topic_id,"onUpdate:modelValue":i[3]||(i[3]=n=>l(t).topic_id=n),errors:l(t).errors?l(t).errors.topic_id:[],value:l(t).topic_id},null,8,["options","modelValue","errors","value"])]),e("div",be,[$e,(x(),g(B,null,q(m,(n,I)=>e("div",{key:n.id,class:"inline-flex items-center mt-3"},[V(e("input",{id:n.id,onInput:w=>y(n.id),name:"type-radio",type:"radio","onUpdate:modelValue":w=>l(t).type=w,value:n.id,class:"h-4 w-4 border-gray-300 text-primary focus:ring-primary cursor-pointer"},null,40,ke),[[J,l(t).type]]),e("label",{for:n.id,class:"mx-3 block text-sm font-medium text-gray-700"},k(n.title),9,we)])),64))]),e("div",Te,[Ve,V(e("textarea",{class:"mt-1 form-input block w-full py-2.5 px-3 border-medium-dark focus:ring-primary border border-medium-gray font-heading rounded-md shadow-sm focus:outline-none focus:ring-1 focus:border-transparent text-sm",placeholder:"Type here...","onUpdate:modelValue":i[4]||(i[4]=n=>l(t).instruction=n),rows:"3"},null,512),[[K,l(t).instruction]])]),e("div",Se,[d(ne,{type:"button",onClick:u},{default:T(()=>[U(" Cancel ")]),_:1}),d(le,{class:"!px-8",type:"submit"},{default:T(()=>[U(" Update ")]),_:1})])],40,me)]),_:1},8,["open"])}}},De={class:"px-4 sm:px-6 lg:px-8"},Ae={class:"mt-8 flow-root"},Be={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},Ie={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},Oe={class:"min-w-full divide-y divide-gray-300"},Ue=e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Title ",-1),Pe={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0"},Me={class:"inline-flex items-center"},Ne=e("span",null,"Topic",-1),qe={class:"ml-1.5"},Ee=e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Course ",-1),je=e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Type ",-1),ze=e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Status ",-1),Fe=e("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-0"},[e("span",{class:"sr-only"},"Edit")],-1),He={class:"divide-y divide-gray-200"},Qe=["onClick"],Re={class:"whitespace-nowrap px-3 py-4 text-sm text-primary"},Le={class:"whitespace-nowrap px-3 py-4 text-sm text-primary"},Ge={class:"whitespace-nowrap px-3 py-4 text-sm text-primary"},Je={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Ke={class:"relative whitespace-nowrap inline-flex items-center py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-0"},We={__name:"DataTable",props:{courses:Array},setup(_,{expose:$}){X(()=>{s()});const a=h(null),t=h("id"),u=h("asc"),p=h([]),v=h(!1),b=h(!1),m=h(null),y=h(!1),f={icon:"check",header:null},s=(o=1)=>{axios.get("/admin/assessments/data-table",{params:{page:o,search:a.value,sort_column:t.value,sort_direction:u.value}}).then(r=>{p.value=r.data}).catch(r=>{console.error(r)})};function i(o){a.value=o,s(1)}S([a,t,u],()=>{s()},{immediate:!0}),$({handleSearch:i,loadData:s});function C(o){if(o){const r=o.match(/page=(\d+)/),D=r?r[1]:1;s(D)}}function n(o){s(o)}function I(o){m.value=o,v.value=!0}function w(){axios.post(route("admin.assessments.delete",m.value.id)).then(o=>{v.value=!1,y.value=!0,f.header="Assessment deleted successfully",s(1)}).catch(o=>{console.error("Delete error:",o)})}const O=M({id:null});function j(o){Y.visit(route("admin.assessments.show",o.id))}function z(o){O.id=o.id,O.patch(route("admin.assessments.toggleStatus",o.id),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{s()}})}function F(o){m.value=o,b.value=!0}return(o,r)=>{const D=N("tooltip");return x(),g(B,null,[e("div",De,[e("div",Ae,[e("div",Be,[e("div",Ie,[e("table",Oe,[e("thead",null,[e("tr",null,[Ue,e("th",Pe,[e("div",Me,[Ne,V((x(),g("button",qe,[d(E,{class:"w-5 h-5 text-medium-gray"})])),[[D,{content:"Assessment will show after this topic"}]])])]),Ee,je,ze,Fe])]),e("tbody",He,[(x(!0),g(B,null,q(p.value.data,(c,H)=>(x(),g("tr",{key:H},[e("td",{class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-bold text-primary sm:pl-0 hover:text-primary-darker cursor-pointer hover:underline",onClick:A=>j(c)},k(c.title),9,Qe),e("td",Re,k(c.after_topic?c.after_topic.title:"--"),1),e("td",Le,k(c.course?c.course.name:"--"),1),e("td",Ge,k(c.type===1?"Practical":"Quiz"),1),e("td",Je,[d(ce,{value:!!c.status,type:"success",onToggleValue:A=>z(c)},null,8,["value","onToggleValue"])]),e("td",Ke,[d(l(se),{onClick:A=>F(c),class:"mx-1 text-medium-gray w-5 h-5 cursor-pointer"},null,8,["onClick"]),d(oe,{onClick:A=>I(c),class:"text-medium-gray cursor-pointer"},null,8,["onClick"])])]))),128))])])])])])]),d(Z,{class:"mt-4 px-2",current_page:p.value.current_page,last_page:p.value.last_page,next_page_url:p.value.next_page_url,prev_page_url:p.value.prev_page_url,path:p.value.path,pagination:p.value,search:a.value,sort_column:t.value,sort_direction:u.value,onEmitPage:C,onEmitSpecificPage:n,total_pages:p.value.total},null,8,["current_page","last_page","next_page_url","prev_page_url","path","pagination","search","sort_column","sort_direction","total_pages"]),d(ee,{open:v.value,onClose:r[0]||(r[0]=c=>v.value=!1),onHandleSubmit:w},null,8,["open"]),d(Ce,{open:b.value,assessment:m.value,onClose:r[1]||(r[1]=c=>b.value=!1),onRefreshDataTable:r[2]||(r[2]=c=>s(1)),courses:_.courses},null,8,["open","assessment","courses"]),d(te,{infos:f,icon:"info",state:y.value,onClose:r[3]||(r[3]=c=>y.value=!1)},null,8,["state"])],64)}}},it=Object.freeze(Object.defineProperty({__proto__:null,default:We},Symbol.toStringTag,{value:"Module"}));export{it as D,P as _,We as a};
