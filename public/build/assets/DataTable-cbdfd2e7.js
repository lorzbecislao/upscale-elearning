import{o as v,c as x,d as e,r as _,a as u,p as j,e as N,l as U,b as A,w as S,u as g,k as M,g as q,q as H,F as P,i as R,t as C,O as F}from"./app-b19efd51.js";import{_ as G}from"./Pagination-87e350d7.js";import{_ as J,a as z,r as X,T as Z}from"./FlashNotificationsFrontEnd-eb33766e.js";import{_ as K}from"./Toggle-0636531a.js";import{_ as Q}from"./Modal-8b7fb719.js";import{_ as W}from"./PrimaryButton-3a9c59a6.js";import{_ as Y}from"./SecondaryButton-74dd022e.js";import{T as D}from"./TextInput-9f73cf15.js";import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";import{v as te}from"./v4-4a60fe23.js";const oe={},se={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ae=e("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),le=[ae];function ne($,y){return v(),x("svg",se,le)}const re=ee(oe,[["render",ne]]),ie={class:"bg-white"},ce={key:0},ue={class:"relative cursor-pointer"},de=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})],-1),pe=[de],me=["src"],ge={key:1},_e={key:0,class:"relative"},fe=["src"],ve={key:0,class:"flex flex-col items-center mx-auto py-6 gap-1"},he=e("svg",{width:"41",height:"40",viewBox:"0 0 41 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M7.1665 26.6665L14.8095 19.0235C16.1112 17.7218 18.2218 17.7218 19.5235 19.0235L27.1665 26.6665M23.8332 23.3332L26.4761 20.6902C27.7779 19.3884 29.8884 19.3884 31.1902 20.6902L33.8332 23.3332M23.8332 13.3332H23.8498M10.4998 33.3332H30.4998C32.3408 33.3332 33.8332 31.8408 33.8332 29.9998V9.99984C33.8332 8.15889 32.3408 6.6665 30.4998 6.6665H10.4998C8.65889 6.6665 7.1665 8.15889 7.1665 9.99984V29.9998C7.1665 31.8408 8.65889 33.3332 10.4998 33.3332Z",stroke:"#878CA6","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe={class:"flex items-center gap-1 text-sm"},ye={class:"relative cursor-pointer text-gray-600 font-medium text-sm",for:"loginPhoto"},be=e("span",{class:"text-primary font-bold hover:underline"},"Upload a photo",-1),we=e("p",{class:"text-gray-600 font-medium"},"or drag and drop",-1),$e=e("p",{class:"text-xs text-gray-500"}," PNG, JPG, JPEG up to 10MB",-1),ke={__name:"SingleUploadSection",props:{attachments:{type:[Array,Object],default:null},id:{type:String,default(){return`upload-section-${te()}`}},requirement:Object,savedImage:String,page:{type:String,default:"sale"},type:{type:String,default:"all"}},emits:["error","uploaded","clear"],setup($,{emit:y}){const o=$,i=_(null),d=_(null);function p(a){a.currentTarget.classList.add("bg-accent"),a.currentTarget.classList.remove("bg-purple-200")}function t(a){a.preventDefault(),a.currentTarget.classList.contains("bg-purple-200")||(a.currentTarget.classList.remove("bg-accent"),a.currentTarget.classList.add("bg-purple-50"))}function h(a){a.preventDefault(),i.value=a.dataTransfer.files[0],y("uploaded",i.value),a.currentTarget.classList.add("bg-accent"),a.currentTarget.classList.remove("bg-purple-200")}function b(){if(i.value=loginPhoto.files[0],!i.value)return;const a=new FileReader;a.readAsDataURL(i.value),a.onload=f=>{d.value=f.target.result,y("uploaded",i.value)}}const l=_(o.savedImage?o.savedImage:"");function m(a,f){d.value=null,l.value=null;const w=document.querySelector('input[type="file"]');w&&(w.value=null)}function n(a){}function T(){i.value=null,d.value=null}return(a,f)=>(v(),x("div",ie,[e("div",{class:"flex-1 h-full justify-center items-center content-stretch rounded-2xl border-2 border-dashed border-gray-300",onDragleave:p,onDragover:t,onDrop:h},[e("div",null,[d.value===null&&l.value?(v(),x("div",ce,[e("div",ue,[e("div",{class:"absolute top-1 right-1 rounded-full bg-white p-1 cursor-pointer",onClick:f[0]||(f[0]=w=>m())},pe),e("img",{src:l.value,alt:"",class:"w-full h-[300px] bg-medium-dark object-scale-down rounded-2xl",onClick:f[1]||(f[1]=w=>(l.value,void 0))},null,8,me)])])):(v(),x("div",ge,[d.value?(v(),x("div",_e,[e("div",{class:"absolute top-1 right-1 rounded-full bg-white p-1 cursor-pointer",onClick:f[2]||(f[2]=w=>m())},[u(re,{class:"w-5 h-5 text-medium-dark"})]),e("img",{src:d.value,alt:"",class:"w-full h-[300px] bg-medium-dark object-cover object-scale-down rounded-2xl"},null,8,fe)])):j("",!0)]))]),!d.value&&!l.value?(v(),x("div",ve,[he,e("div",xe,[e("label",ye,[be,e("input",{onClick:T,accept:".jpg,.jpeg,.png",class:"w-px h-px opacity-0 overflow-hidden absolute",id:"loginPhoto",ref:"loginPhoto",type:"file",onChange:b},null,544)]),we]),$e])):j("",!0)],32)]))}},Ce=e("h5",{class:"font-heading font-bold text-black-darkest"}," Update Course ",-1),Te=["onSubmit"],Se={class:"pt-6"},De={class:"pt-6"},Ve={class:"pt-6"},Le={class:"pt-6"},je=e("label",{class:"block text-sm font-medium font-heading text-dark-gray-dark",for:"image-upload"},"Course Image",-1),Me={class:"pt-6 flex justify-end gap-3"},Pe={__name:"EditCourseModal",props:{open:Boolean,course:Object},emits:["close","refreshDataTable"],setup($,{emit:y}){const o=$,i=_(o.course?o.course.image_url:null);function d(l){i.value=l}function p(){i.value=null}const t=N({name:o.course?o.course.name:null,code:o.course?o.course.code:null,description:o.course?o.course.description:null,image:o.course?o.course.image_url:null});U(()=>o.course,l=>{l&&(t.name=l.name,t.code=l.code,t.description=l.description,t.image=l.image_url)});function h(){t.name=o.course.name,t.code=o.course.code,t.description=o.course.description,t.image=o.course.image_url,y("close")}const b=()=>{t.image=i.value,t.post(route("admin.courses.update",o.course.id),{onSuccess:()=>{h(),t.name="",t.code="",t.description="",t.image="",y("refreshDataTable")}})};return(l,m)=>(v(),A(Q,{open:$.open,onClose:h},{content:S(()=>[Ce,e("form",{onSubmit:q(b,["prevent"])},[e("div",Se,[u(D,{max:256,modelValue:g(t).name,"onUpdate:modelValue":m[0]||(m[0]=n=>g(t).name=n),errors:g(t).errors?g(t).errors.name:[],label:"Course Name",placeholder:"Ex: Advanced Javascript, Advanced HTML5"},null,8,["modelValue","errors"])]),e("div",De,[u(D,{modelValue:g(t).code,"onUpdate:modelValue":m[1]||(m[1]=n=>g(t).code=n),errors:g(t).errors?g(t).errors.code:[],label:"Course Code",required:!0},null,8,["modelValue","errors"])]),e("div",Ve,[u(D,{modelValue:g(t).description,"onUpdate:modelValue":m[2]||(m[2]=n=>g(t).description=n),label:"Course Description",required:!0},null,8,["modelValue"])]),e("div",Le,[je,u(ke,{"saved-image":g(t).image,id:"image-upload",type:"image-only",onUploaded:d,onClear:p,class:"pt-2"},null,8,["saved-image"])]),e("div",Me,[u(Y,{type:"button",onClick:h},{default:S(()=>[M(" Cancel ")]),_:1}),u(W,{class:"!px-8",type:"submit"},{default:S(()=>[M(" Update ")]),_:1})])],40,Te)]),_:1},8,["open"]))}},Ne={class:"px-4 sm:px-6 lg:px-8"},Ue={class:"mt-8 flow-root"},Ie={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},Be={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},Ee={class:"min-w-full divide-y divide-gray-300"},Oe=e("thead",null,[e("tr",null,[e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0"},"Code"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Name"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"No. of Topics"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"No. of Assessments"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Status"),e("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-0"},[e("span",{class:"sr-only"},"Edit")])])],-1),Ae={class:"divide-y divide-gray-200"},qe=["onClick"],He=["onClick"],Re={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Fe={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Ge={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Je={class:"relative whitespace-nowrap inline-flex items-center py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-0"},ze={__name:"DataTable",props:{},setup($,{expose:y}){H(()=>{n()});const o=_(null),i=_("id"),d=_("asc"),p=_([]),t=_(!1),h=_(!1),b=_(null),l=_(!1),m={icon:"check",header:null},n=(s=1)=>{axios.get("/admin/courses/data-table",{params:{page:s,search:o.value,sort_column:i.value,sort_direction:d.value}}).then(c=>{p.value=c.data}).catch(c=>{console.error(c)})};function T(s){o.value=s,n(1)}U([o,i,d],()=>{n()},{immediate:!0}),y({handleSearch:T,loadData:n});function a(s){if(s){const c=s.match(/page=(\d+)/),r=c?c[1]:1;n(r)}}function f(s){n(s)}function w(s){b.value=s,t.value=!0}function I(s){b.value=s,h.value=!0}function B(){axios.post(route("admin.courses.delete",b.value.id)).then(s=>{t.value=!1,l.value=!0,m.header="Course deleted successfully",n(1)}).catch(s=>{console.error("Delete error:",s)})}const V=N({id:null});function L(s){F.visit(route("admin.courses.show",s.slug))}function E(s){V.id=s.id,V.patch(route("admin.courses.toggleStatus",s.id),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{n()}})}return(s,c)=>(v(),x(P,null,[e("div",Ne,[e("div",Ue,[e("div",Ie,[e("div",Be,[e("table",Ee,[Oe,e("tbody",Ae,[(v(!0),x(P,null,R(p.value.data,(r,O)=>(v(),x("tr",{key:O},[e("td",{class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-bold text-primary sm:pl-0 hover:text-primary-darker cursor-pointer hover:underline",onClick:k=>L(r)},C(r.code),9,qe),e("td",{class:"whitespace-nowrap px-3 py-4 text-sm text-primary hover:text-primary-darker cursor-pointer hover:underline",onClick:k=>L(r)},C(r.name),9,He),e("td",Re,C(r.topics.length),1),e("td",Fe,C(r.assessments.length),1),e("td",Ge,[u(K,{value:!!r.status,type:"success",onToggleValue:k=>E(r)},null,8,["value","onToggleValue"])]),e("td",Je,[u(g(X),{onClick:k=>I(r),class:"mx-1 text-medium-gray w-5 h-5 cursor-pointer"},null,8,["onClick"]),u(Z,{onClick:k=>w(r),class:"text-medium-gray cursor-pointer"},null,8,["onClick"])])]))),128))])])])])])]),u(G,{class:"mt-4 px-2",current_page:p.value.current_page,last_page:p.value.last_page,next_page_url:p.value.next_page_url,prev_page_url:p.value.prev_page_url,path:p.value.path,pagination:p.value,search:o.value,sort_column:i.value,sort_direction:d.value,onEmitPage:a,onEmitSpecificPage:f,total_pages:p.value.total},null,8,["current_page","last_page","next_page_url","prev_page_url","path","pagination","search","sort_column","sort_direction","total_pages"]),u(J,{open:t.value,onClose:c[0]||(c[0]=r=>t.value=!1),onHandleSubmit:B},null,8,["open"]),u(Pe,{open:h.value,course:b.value,onClose:c[1]||(c[1]=r=>h.value=!1),onRefreshDataTable:c[2]||(c[2]=r=>n(1))},null,8,["open","course"]),u(z,{infos:m,icon:"info",state:l.value,onClose:c[3]||(c[3]=r=>l.value=!1)},null,8,["state"])],64))}},at=Object.freeze(Object.defineProperty({__proto__:null,default:ze},Symbol.toStringTag,{value:"Module"}));export{at as D,ke as _,ze as a};
